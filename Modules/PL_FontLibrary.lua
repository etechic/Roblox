local FontLib = {}

FontLib.FONT = {
    ["A"] = {
        ".111.",
        "1...1",
        "1...1",
        "11111",
        "1...1",
        "1...1",
        "1...1",
    },
    ["B"] = {
        "1111.",
        "1...1",
        "1...1",
        "1111.",
        "1...1",
        "1...1",
        "1111.",
    },
    ["C"] = {
        ".1111",
        "1....",
        "1....",
        "1....",
        "1....",
        "1....",
        ".1111",
    },
    ["D"] = {
        "1111.",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "1111.",
    },
    ["E"] = {
        "11111",
        "1....",
        "1....",
        "11111",
        "1....",
        "1....",
        "11111",
    },
    ["F"] = {
        "11111",
        "1....",
        "1....",
        "11111",
        "1....",
        "1....",
        "1....",
    },
    ["G"] = {
        ".1111",
        "1....",
        "1....",
        "1.111",
        "1...1",
        "1...1",
        ".1111",
    },
    ["H"] = {
        "1...1",
        "1...1",
        "1...1",
        "11111",
        "1...1",
        "1...1",
        "1...1",
    },
    ["I"] = {
        "11111",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        "11111",
    },
    ["J"] = {
        "11111",
        "...1.",
        "...1.",
        "...1.",
        "...1.",
        "1..1.",
        ".11..",
    },
    ["K"] = {
        "1...1",
        "1..1.",
        "1.1..",
        "11...",
        "1.1..",
        "1..1.",
        "1...1",
    },
    ["L"] = {
        "1....",
        "1....",
        "1....",
        "1....",
        "1....",
        "1....",
        "11111",
    },
    ["M"] = {
        "1...1",
        "11.11",
        "1.1.1",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
    },
    ["N"] = {
        "1...1",
        "11..1",
        "1.1.1",
        "1..11",
        "1...1",
        "1...1",
        "1...1",
    },
    ["O"] = {
        "11111",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "11111",
    },
    ["P"] = {
        "11111",
        "1...1",
        "1...1",
        "11111",
        "1....",
        "1....",
        "1....",
    },
    ["Q"] = {
        "11111",
        "1...1",
        "1...1",
        "1...1",
        "1.1.1",
        "1..1.",
        "111.1",
    },
    ["R"] = {
        "11111",
        "1...1",
        "1...1",
        "11111",
        "1.1..",
        "1..1.",
        "1...1",
    },
    ["S"] = {
        ".1111",
        "1....",
        "1....",
        ".111.",
        "....1",
        "....1",
        "1111.",
    },
    ["T"] = {
        "11111",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
    },
    ["U"] = {
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        ".111.",
    },
    ["V"] = {
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        ".1.1.",
        ".1.1.",
        "..1..",
    },
    ["W"] = {
        "1...1",
        "1...1",
        "1...1",
        "1.1.1",
        "1.1.1",
        "11.11",
        "1...1",
    },
    ["X"] = {
        "1...1",
        ".1.1.",
        "..1..",
        "..1..",
        ".1.1.",
        "1...1",
        "1...1",
    },
    ["Y"] = {
        "1...1",
        ".1.1.",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
    },
    ["Z"] = {
        "11111",
        "...1.",
        "..1..",
        ".1...",
        "1....",
        "1....",
        "11111",
    },

        ["0"] = {
        "11111",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "1...1",
        "11111",
    },
    ["1"] = {
        "..1..",
        ".11..",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        ".111.",
    },
    ["2"] = {
        "11111",
        "....1",
        "....1",
        "11111",
        "1....",
        "1....",
        "11111",
    },
    ["3"] = {
        "11111",
        "....1",
        "....1",
        ".1111",
        "....1",
        "....1",
        "11111",
    },
    ["4"] = {
        "1...1",
        "1...1",
        "1...1",
        "11111",
        "....1",
        "....1",
        "....1",
    },
    ["5"] = {
        "11111",
        "1....",
        "1....",
        "11111",
        "....1",
        "....1",
        "11111",
    },
    ["6"] = {
        "11111",
        "1....",
        "1....",
        "11111",
        "1...1",
        "1...1",
        "11111",
    },
    ["7"] = {
        "11111",
        "....1",
        "...1.",
        "..1..",
        ".1...",
        ".1...",
        ".1...",
    },
    ["8"] = {
        "11111",
        "1...1",
        "1...1",
        "11111",
        "1...1",
        "1...1",
        "11111",
    },
    ["9"] = {
        "11111",
        "1...1",
        "1...1",
        "11111",
        "....1",
        "....1",
        "11111",
    },
    ["."] = {
        ".....",
        ".....",
        ".....",
        ".....",
        ".....",
        "..1..",
        "..1..",
    },
    [","] = {
        ".....",
        ".....",
        ".....",
        ".....",
        "..1..",
        "..1..",
        ".1...",
    },
    [":"] = {
        ".....",
        "..1..",
        "..1..",
        ".....",
        "..1..",
        "..1..",
        ".....",
    },
    [";"] = {
        ".....",
        "..1..",
        "..1..",
        ".....",
        "..1..",
        "..1..",
        ".1...",
    },
    ["+"] = {
        ".....",
        "..1..",
        "..1..",
        "11111",
        "..1..",
        "..1..",
        ".....",
    },

    ["-"] = {
        ".....",
        ".....",
        ".....",
        "11111",
        ".....",
        ".....",
        ".....",
    },

    ["="] = {
        ".....",
        ".....",
        "11111",
        ".....",
        "11111",
        ".....",
        ".....",
    },

    ["*"] = {
        ".....",
        ".1.1.",
        "..1..",
        "11111",
        "..1..",
        ".1.1.",
        ".....",
    },

    ["/"] = {
        "....1",
        "...1.",
        "..1..",
        ".1...",
        "1....",
        ".....",
        ".....",
    },
    ["!"] = {
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        "..1..",
        ".....",
        "..1..",
    },
    ["?"] = {
        "11111",
        "....1",
        "...1.",
        "..1..",
        "..1..",
        ".....",
        "..1..",
    },
    ["<3"] = {
        ".1.1.",
        "11111",
        "11111",
        ".111.",
        "..1..",
        ".....",
        ".....",
    },
};

function FontLib.BuildText(TEXT, hPos, opts)
    opts = opts or {};

    local scale = opts.scale or 0.6;
    local spacing = opts.spacing or 1.2;
    local wobble = opts.wobble or 0;

    local points = {};
    local xOffset = 0;

    for letter in TEXT:gmatch(".") do
        local pattern = FontLib.FONT[letter];
        if pattern then
            for y, row in ipairs(pattern) do
                for x = 1, #row do
                    if row:sub(x, x) == "1" then
                        local base = Vector3.new((x- 1) * scale + xOffset, -(y- 1) * scale, 0);
                        local wob = math.sin(wobble + (x + y) * 0.35) * 0.15;
                        base += Vector3.new(0, wob, 0);

                        local p1 = hPos + base;
                        local p2 = p1 + Vector3.new(scale, 0, 0);
                        local p3 = p1 + Vector3.new(scale, -scale, 0);
                        local p4 = p1 + Vector3.new(0, -scale, 0);

                        points[#points+1] = {p1, p2, nil};
                        points[#points+1] = {p2, p3, nil};
                        points[#points+1] = {p3, p4, nil};
                        points[#points+1] = {p4, p1, nil};
                    end
                end
            end
        end
        xOffset += (6 * scale * spacing);
    end
    return points
end

return FontLib
